<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://listyu.github.io</id>
    <title>ListYu</title>
    <updated>2023-01-06T10:18:38.406Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://listyu.github.io"/>
    <link rel="self" href="https://listyu.github.io/atom.xml"/>
    <subtitle>Hi.I&apos;m HengJie.</subtitle>
    <logo>https://listyu.github.io/images/avatar.png</logo>
    <icon>https://listyu.github.io/favicon.ico</icon>
    <rights>All rights reserved 2023, ListYu</rights>
    <entry>
        <title type="html"><![CDATA[js ä¸­æ•°ç»„å¯¹è±¡æŸä¸€ç´¢å¼•æ±‚å’Œ]]></title>
        <id>https://listyu.github.io/post/js-reduce/</id>
        <link href="https://listyu.github.io/post/js-reduce/">
        </link>
        <updated>2023-01-05T13:34:26.000Z</updated>
        <content type="html"><![CDATA[<p>ä¹‹å‰åšä¸€ä¸ªæ•°ç»„å¯¹è±¡æ±‚å’ŒåŠŸèƒ½æ—¶ç”¨çš„ <code>forEach</code> æ„Ÿè§‰ä¸å¤Ÿç®€å•ã€‚<br>
åæ¥åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†å†…ç½®çš„ <code>reduce</code> å‡½æ•°åˆšå¥½å¯ä»¥è§£å†³è¿™ä¸ªæ±‚å’Œé—®é¢˜</p>
<pre><code class="language-javascript">let datas = [
        {a: 15, b: 2},
        {a: 23, b: 1},
        {a: 45, b: 8},
        {a: 66, b: 7},
        {a: 33, b: 3}
    ];
    // è¾“å‡º 182
    console.log(datas.reduce((total, item) =&gt; total + item.a, 0));
    ```
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[nedb ä½¿ç”¨è¯´æ˜]]></title>
        <id>https://listyu.github.io/post/using-nedb/</id>
        <link href="https://listyu.github.io/post/using-nedb/">
        </link>
        <updated>2023-01-04T03:01:48.000Z</updated>
        <content type="html"><![CDATA[<p>nedbæ˜¯ä¸€ä¸ªç”¨javascriptç¼–å†™çš„è½»é‡çº§åµŒå…¥å¼æ•°æ®åº“ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p><code>npm install nedb</code></p>
<h2 id="åˆ›å»ºä¸æŒ‚è½½æ•°æ®åº“">åˆ›å»ºä¸æŒ‚è½½æ•°æ®åº“</h2>
<p>æ‚¨å¯ä»¥å°†NeDBç”¨ä½œä»…å†…å­˜ä¸­çš„æ•°æ®å­˜å‚¨æˆ–æŒä¹…æ•°æ®å­˜å‚¨ã€‚ä¸€ä¸ªæ•°æ®å­˜å‚¨ç›¸å½“äºMongoDBé›†åˆã€‚æ„é€ å‡½æ•°çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š<code>new Datastore(options)</code>ï¼Œå…¶ä¸­ <code>options</code> æ˜¯å…·æœ‰ä»¥ä¸‹å­—æ®µçš„å¯¹è±¡ï¼š</p>
<ul>
<li><code>filename</code>ï¼ˆå¯é€‰ï¼‰ï¼šä¿å­˜æ•°æ®çš„æ–‡ä»¶çš„è·¯å¾„ã€‚å¦‚æœä¿ç•™ä¸ºç©ºï¼Œåˆ™æ•°æ®å­˜å‚¨å°†è‡ªåŠ¨ä»…åœ¨å†…å­˜ä¸­è€ƒè™‘ã€‚</li>
<li><code>inMemoryOnly</code> ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºfalseï¼‰ï¼šé¡¾åæ€ä¹‰ã€‚</li>
<li><code>autoload</code>  ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºfalseï¼‰ï¼šå¦‚æœä½¿ç”¨ï¼Œæ•°æ®åº“å°†åœ¨åˆ›å»ºæ—¶è‡ªåŠ¨ä»æ•°æ®æ–‡ä»¶åŠ è½½ï¼ˆä¸éœ€è¦è°ƒç”¨ <code>loadDatabase</code> ï¼‰ã€‚åœ¨åŠ è½½å®Œæˆä¹‹å‰å‘å‡ºçš„ä»»ä½•å‘½ä»¤éƒ½å°†è¢«ç¼“å†²ï¼Œå¹¶å°†åœ¨åŠ è½½å®Œæˆæ—¶æ‰§è¡Œã€‚</li>
<li><code>nodeWebkitAppName</code> ï¼ˆå¯é€‰ï¼‰ï¼šå¦‚æœæ‚¨åœ¨Node Webkitåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨NeDBï¼Œè¯·åœ¨æ­¤å­—æ®µä¸­æŒ‡å®šå…¶åç§°ï¼ˆä¸ <code>package.json</code> ä¸­ä½¿ç”¨çš„åç§°ç›¸åŒï¼‰ï¼Œæ–‡ä»¶åå°†ä¸Node Webkitç”¨äºå­˜å‚¨åº”ç”¨ç¨‹åºå…¶ä½™æ•°æ®ï¼ˆæœ¬åœ°å­˜å‚¨ç­‰ï¼‰çš„ç›®å½•ç›¸å¯¹åº”ã€‚å®ƒé€‚ç”¨äºLinuxã€OS Xå’ŒWindows</li>
</ul>
<p>å¦‚æœä½¿ç”¨ä¸å¸¦è‡ªåŠ¨åŠ è½½é€‰é¡¹çš„æŒä¹…æ•°æ®å­˜å‚¨ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è°ƒç”¨ <code>loadDatabase</code> ã€‚æ­¤å‡½æ•°ä»æ•°æ®æ–‡ä»¶ä¸­è·å–æ•°æ®å¹¶å‡†å¤‡æ•°æ®åº“ã€‚åˆ«å¿˜äº†ï¼å¦‚æœä½¿ç”¨æŒä¹…æ•°æ®å­˜å‚¨ï¼Œåˆ™åœ¨è°ƒç”¨ <code>loadDatabase</code> ä¹‹å‰ä¸ä¼šæ‰§è¡Œä»»ä½•å‘½ä»¤ï¼ˆ<code>insert</code>ã€<code>find</code>ã€<code>update</code>ã€<code>remove</code>ï¼‰ï¼Œå› æ­¤è¯·ç¡®ä¿è‡ªå·±è°ƒç”¨å®ƒæˆ–ä½¿ç”¨ <code>autoload</code> é€‰é¡¹ã€‚</p>
<pre><code class="language-javascript">// Type 1: In-memory only datastore (no need to load the database)
var Datastore = require('nedb')
  , db = new Datastore();


// Type 2: Persistent datastore with manual loading
var Datastore = require('nedb')
  , db = new Datastore({ filename: 'path/to/datafile' });
db.loadDatabase(function (err) {    // Callback is optional
  // Now commands will be executed
});


// Type 3: Persistent datastore with automatic loading
var Datastore = require('nedb')
  , db = new Datastore({ filename: 'path/to/datafile', autoload: true });
// You can issue commands right away


// Type 4: Persistent datastore for a Node Webkit app called 'nwtest'
// For example on Linux, the datafile will be ~/.config/nwtest/nedb-data/something.db
var Datastore = require('nedb')
  , db = new Datastore({ filename: 'something.db', nodeWebkitAppName: 'nwtest' });


// Of course you can create multiple datastores if you need several
// collections. In this case it's usually a good idea to use autoload for all collections.
db = {};
db.users = new Datastore('path/to/users.db');
db.robots = new Datastore('path/to/robots.db');

// You need to load each database (here we do it asynchronously)
db.users.loadDatabase();
db.robots.loadDatabase();
</code></pre>
<h3 id="æ’å…¥æ•°æ®">æ’å…¥æ•°æ®</h3>
<p>æœ¬æœºç±»å‹ä¸º <code>String</code>ã€<code>Number</code>ã€<code>Boolean</code>ã€<code>Date</code> å’Œ <code>null</code>ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„å’Œå­æ–‡æ¡£ï¼ˆå¯¹è±¡ï¼‰ã€‚å¦‚æœå­—æ®µæœªå®šä¹‰ï¼Œå®ƒå°†ä¸ä¼šè¢«ä¿å­˜ï¼ˆè¿™ä¸MongoDBä¸åŒï¼ŒMongoDBåœ¨nullä¸­è½¬æ¢undefinedï¼Œæˆ‘å‘ç°è¿™æ˜¯ä¸ç›´è§‚çš„ï¼‰ã€‚<br>
NeDBå°†è‡ªåŠ¨ç”Ÿæˆ_idå­—æ®µã€‚è¿™æ˜¯ä¸€ä¸ª16ä¸ªå­—ç¬¦çš„å­—æ¯æ•°å­—å­—ç¬¦ä¸²ï¼Œä¸€æ—¦ç”Ÿæˆå°±ä¸èƒ½ä¿®æ”¹ã€‚ä¸MongoDBä¸åŒï¼Œæ‚¨ä¸èƒ½æŒ‡å®šå®ƒï¼ˆæ— è®ºå¦‚ä½•è¿™åº”è¯¥ä¸æ˜¯é—®é¢˜ï¼‰ã€‚</p>
<p>å­—æ®µåä¸èƒ½ä»¥ <code>'$'</code> å¼€å¤´æˆ–åŒ…å« <code>'.'</code>ã€‚</p>
<pre><code class="language-javascript">var document = { hello: 'world'
               , n: 5
               , today: new Date()
               , nedbIsAwesome: true
               , notthere: null
               , notToBeSaved: undefined  // Will not be saved
               , fruits: [ 'apple', 'orange', 'pear' ]
               , infos: { name: 'nedb' }
               };

db.insert(document, function (err, newDoc) {   // Callback is optional
  // newDoc is the newly inserted document, including its _id
  // newDoc has no key called notToBeSaved since its value was undefined
});
</code></pre>
<h3 id="æ›´æ–°æ•°æ®">æ›´æ–°æ•°æ®</h3>
<p><code>db.update(query, update, options, callback)</code></p>
<ul>
<li><code>query</code> ä¸ <code>find</code> å’Œ <code>findOne</code> ä½¿ç”¨çš„æŸ¥æ‰¾æŸ¥è¯¢ç±»å‹ç›¸åŒ</li>
<li><code>update</code> æŒ‡å®šåº”å¦‚ä½•ä¿®æ”¹æ–‡æ¡£ã€‚å®ƒè¦ä¹ˆæ˜¯ä¸€ä¸ªæ–°æ–‡æ¡£ï¼Œè¦ä¹ˆæ˜¯ä¸€ç»„ä¿®é¥°ç¬¦ï¼ˆä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œè¿™æ²¡æœ‰æ„ä¹‰ï¼ï¼‰
<ul>
<li>æ–°æ–‡æ¡£å°†æ›¿æ¢åŒ¹é…çš„æ–‡æ¡£</li>
<li>å¦‚æœå­—æ®µä¸å­˜åœ¨ï¼Œä¿®æ”¹å™¨å°†åˆ›å»ºéœ€è¦ä¿®æ”¹çš„å­—æ®µï¼Œæ‚¨å¯ä»¥å°†å®ƒä»¬åº”ç”¨äºå­åŸŸã€‚å¯ç”¨çš„å­—æ®µä¿®é¥°ç¬¦æ˜¯ <code>$set</code> ç”¨äºæ›´æ”¹å­—æ®µå€¼ï¼Œ<code>$inc</code> ç”¨äºå¢åŠ å­—æ®µå€¼ã€‚è¦å¤„ç†æ•°ç»„ï¼Œéœ€è¦ <code>$push</code> ã€<code>$pop</code>ã€ <code>$addToSet</code> å’Œç‰¹æ®Šçš„ <code>$each</code> ã€‚æœ‰å…³è¯­æ³•ï¼Œè¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹ã€‚</li>
</ul>
</li>
<li><code>options</code> æ˜¯å…·æœ‰ä¸¤ä¸ªå¯èƒ½å‚æ•°çš„å¯¹è±¡
<ul>
<li><code>multi</code> ï¼ˆé»˜è®¤ä¸º <code>false</code>ï¼‰ï¼Œå¦‚æœè®¾ç½®ä¸º <code>true</code>ï¼Œåˆ™å…è®¸ä¿®æ”¹å¤šä¸ªæ–‡æ¡£</li>
<li><code>upsert</code> ï¼ˆé»˜è®¤ä¸º <code>false</code>ï¼‰å¦‚æœæ‚¨çš„æŸ¥è¯¢ä¸ä»»ä½•å†…å®¹éƒ½ä¸åŒ¹é…ï¼Œåˆ™è¦æ’å…¥ä¸æ›´æ–°è§„åˆ™ç›¸å¯¹åº”çš„æ–°æ–‡æ¡£</li>
</ul>
</li>
<li><code>callback</code> ï¼ˆå¯é€‰ï¼‰å‚æ•°ï¼šerrï¼ŒnumReplacedï¼Œupstart</li>
<li><code>numReplaced</code> è¢«æ›¿æ¢çš„æ–‡æ¡£æ•°</li>
<li><code>upstart</code> å¦‚æœé€‰æ‹©äº†è¿½åŠ å¯åŠ¨æ¨¡å¼å¹¶æ’å…¥äº†æ–‡æ¡£ï¼Œåˆ™è®¾ç½®ä¸º <code>true</code></li>
</ul>
<p>ç¤ºä¾‹</p>
<pre><code class="language-javascript">// Let's use the same example collection as in the &quot;finding document&quot; part
// { _id: 'id1', planet: 'Mars', system: 'solar', inhabited: false }
// { _id: 'id2', planet: 'Earth', system: 'solar', inhabited: true }
// { _id: 'id3', planet: 'Jupiter', system: 'solar', inhabited: false }
// { _id: 'id4', planet: 'Omicron Persia 8', system: 'futurama', inhabited: true }

// Replace a document by another
db.update({ planet: 'Jupiter' }, { planet: 'Pluton'}, {}, function (err, numReplaced) {
  // numReplaced = 1
  // The doc #3 has been replaced by { _id: 'id3', planet: 'Pluton' }
  // Note that the _id is kept unchanged, and the document has been replaced
  // (the 'system' and inhabited fields are not here anymore)
});

// Set an existing field's value
db.update({ system: 'solar' }, { $set: { system: 'solar system' } }, { multi: true }, function (err, numReplaced) {
  // numReplaced = 3
  // Field 'system' on Mars, Earth, Jupiter now has value 'solar system'
});

// Setting the value of a non-existing field in a subdocument by using the dot-notation
db.update({ planet: 'Mars' }, { $set: { &quot;data.satellites&quot;: 2, &quot;data.red&quot;: true } }, {}, function () {
  // Mars document now is { _id: 'id1', system: 'solar', inhabited: false
  //                      , data: { satellites: 2, red: true }
  //                      }
  // Not that to set fields in subdocuments, you HAVE to use dot-notation
  // Using object-notation will just replace the top-level field
  db.update({ planet: 'Mars' }, { $set: { data: { satellites: 3 } } }, {}, function () {
    // Mars document now is { _id: 'id1', system: 'solar', inhabited: false
    //                      , data: { satellites: 3 }
    //                      }
    // You lost the &quot;data.red&quot; field which is probably not the intended behavior
  });
});

// Deleting a field
db.update({ planet: 'Mars' }, { $unset: { planet: true } }, {}, function () {
  // Now the document for Mars doesn't contain the planet field
  // You can unset nested fields with the dot notation of course
});

// Upserting a document
db.update({ planet: 'Pluton' }, { planet: 'Pluton', inhabited: false }, { upsert: true }, function (err, numReplaced, upsert) {
  // numReplaced = 1, upsert = true
  // A new document { _id: 'id5', planet: 'Pluton', inhabited: false } has been added to the collection
});

// If you upsert with a modifier, the upserted doc is the query modified by the modifier
// This is simpler than it sounds :)
db.update({ planet: 'Pluton' }, { $inc: { distance: 38 } }, { upsert: true }, function () {
  // A new document { _id: 'id5', planet: 'Pluton', distance: 38 } has been added to the collection  
});

// If we insert a new document { _id: 'id6', fruits: ['apple', 'orange', 'pear'] } in the collection,
// let's see how we can modify the array field atomically

// $push inserts new elements at the end of the array
db.update({ _id: 'id6' }, { $push: { fruits: 'banana' } }, {}, function () {
  // Now the fruits array is ['apple', 'orange', 'pear', 'banana']
});

// $pop removes an element from the end (if used with 1) or the front (if used with -1) of the array
db.update({ _id: 'id6' }, { $pop: { fruits: 1 } }, {}, function () {
  // Now the fruits array is ['apple', 'orange']
  // With { $pop: { fruits: -1 } }, it would have been ['orange', 'pear']
});

// $addToSet adds an element to an array only if it isn't already in it
// Equality is deep-checked (i.e. $addToSet will not insert an object in an array already containing the same object)
// Note that it doesn't check whether the array contained duplicates before or not
db.update({ _id: 'id6' }, { $addToSet: { fruits: 'apple' } }, {}, function () {
  // The fruits array didn't change
  // If we had used a fruit not in the array, e.g. 'banana', it would have been added to the array
});

// $each can be used to $push or $addToSet multiple values at once
// This example works the same way with $addToSet
db.update({ _id: 'id6' }, { $push: { fruits: ['banana', 'orange'] } }, {}, function () {
  // Now the fruits array is ['apple', 'orange', 'pear', 'banana', 'orange']
});
</code></pre>
<h3 id="åˆ é™¤æ•°æ®">åˆ é™¤æ•°æ®</h3>
<p><code>db.remove(query, options, callback)</code>  å°†æ ¹æ®é€‰é¡¹åˆ é™¤æ‰€æœ‰åŒ¹é…æŸ¥è¯¢çš„æ–‡æ¡£</p>
<ul>
<li><code>query</code> ä¸ç”¨äºæŸ¥æ‰¾å’Œæ›´æ–°çš„ç›¸åŒ</li>
<li><code>options</code> ç›®å‰åªæœ‰ä¸€ä¸ªé€‰é¡¹ï¼š<code>multi</code>ï¼Œå¦‚æœè®¾ç½®ä¸º <code>true</code> ï¼Œåˆ™å…è®¸åˆ é™¤å¤šä¸ªæ–‡æ¡£ã€‚é»˜è®¤å€¼ä¸º <code>false</code></li>
<li><code>callback</code> æ˜¯å¯é€‰çš„ï¼Œå‚æ•°ï¼š<code>err</code>ï¼Œ<code>numRemoved</code></li>
</ul>
<pre><code class="language-javascript">// Let's use the same example collection as in the &quot;finding document&quot; part
// { _id: 'id1', planet: 'Mars', system: 'solar', inhabited: false }
// { _id: 'id2', planet: 'Earth', system: 'solar', inhabited: true }
// { _id: 'id3', planet: 'Jupiter', system: 'solar', inhabited: false }
// { _id: 'id4', planet: 'Omicron Persia 8', system: 'futurama', inhabited: true }

// Remove one document from the collection
// options set to {} since the default for multi is false
db.remove({ _id: 'id2' }, {}, function (err, numRemoved) {
  // numRemoved = 1
});

// Remove multiple documents
db.remove({ system: 'solar' }, { multi: true }, function (err, numRemoved) {
  // numRemoved = 3
  // All planets from the solar system were removed
});
</code></pre>
<h3 id="æŸ¥æ‰¾æ–‡æ¡£">æŸ¥æ‰¾æ–‡æ¡£</h3>
<p>ä½¿ç”¨ <code>find</code> æŸ¥æ‰¾ä¸æŸ¥è¯¢åŒ¹é…çš„å¤šä¸ªæ–‡æ¡£ï¼Œæˆ–ä½¿ç”¨ <code>findOne</code> æŸ¥æ‰¾ä¸€ä¸ªç‰¹å®šæ–‡æ¡£ã€‚æ‚¨å¯ä»¥åŸºäºå­—æ®µç›¸ç­‰æ€§é€‰æ‹©æ–‡æ¡£æˆ–ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆ<code>$lt</code>ã€<code>$lte</code>ã€<code>$gt</code>ã€<code>$gte</code>ã€<code>$in</code>ã€<code>$nin</code>ã€<code>$ne</code>ï¼‰ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦<code>$or</code>ã€<code>$and</code>å’Œ<code>$not</code>ã€‚è¯­æ³•è§ä¸‹æ–‡ã€‚<br>
å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼šåœ¨åŸºæœ¬æŸ¥è¯¢ä¸­ä»£æ›¿å­—ç¬¦ä¸²ï¼Œæˆ–ä½¿ç”¨<code>$regex</code>è¿ç®—ç¬¦ã€‚<br>
æ‚¨å¯ä»¥ä½¿ç”¨æ¸¸æ ‡APIå¯¹ç»“æœè¿›è¡Œæ’åºå’Œåˆ†é¡µï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚</p>
<h4 id="åŸºæœ¬æŸ¥è¯¢">åŸºæœ¬æŸ¥è¯¢</h4>
<p>åŸºæœ¬æŸ¥è¯¢æ–¹æ³•æ˜¯æŸ¥æ‰¾å­—æ®µä¸æŒ‡å®šå­—æ®µåŒ¹é…çš„æ–‡æ¡£ã€‚å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å­—ç¬¦ä¸²ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ç‚¹ç¬¦å·åœ¨åµŒå¥—æ–‡æ¡£ã€æ•°ç»„å’Œå­æ–‡æ¡£æ•°ç»„ä¸­å¯¼èˆªï¼Œå¹¶åŒ¹é…æ•°ç»„ä¸­çš„ç‰¹å®šå…ƒç´ ã€‚</p>
<pre><code class="language-javascript">// Let's say our datastore contains the following collection
// { _id: 'id1', planet: 'Mars', system: 'solar', inhabited: false, satellites: ['Phobos', 'Deimos'] }
// { _id: 'id2', planet: 'Earth', system: 'solar', inhabited: true, humans: { genders: 2, eyes: true } }
// { _id: 'id3', planet: 'Jupiter', system: 'solar', inhabited: false }
// { _id: 'id4', planet: 'Omicron Persei 8', system: 'futurama', inhabited: true, humans: { genders: 7 } }
// { _id: 'id5', completeData: { planets: [ { name: 'Earth', number: 3 }, { name: 'Mars', number: 2 }, { name: 'Pluton', number: 9 } ] } }

// Finding all planets in the solar system
db.find({ system: 'solar' }, function (err, docs) {
  // docs is an array containing documents Mars, Earth, Jupiter
  // If no document is found, docs is equal to []
});

// Finding all planets whose name contain the substring 'ar' using a regular expression
db.find({ planet: /ar/ }, function (err, docs) {
  // docs contains Mars and Earth
});

// Finding all inhabited planets in the solar system
db.find({ system: 'solar', inhabited: true }, function (err, docs) {
  // docs is an array containing document Earth only
});

// Use the dot-notation to match fields in subdocuments
db.find({ &quot;humans.genders&quot;: 2 }, function (err, docs) {
  // docs contains Earth
});

// Use the dot-notation to navigate arrays of subdocuments
db.find({ &quot;completeData.planets.name&quot;: &quot;Mars&quot; }, function (err, docs) {
  // docs contains document 5
});

db.find({ &quot;completeData.planets.name&quot;: &quot;Jupiter&quot; }, function (err, docs) {
  // docs is empty
});

db.find({ &quot;completeData.planets.0.name&quot;: &quot;Earth&quot; }, function (err, docs) {
  // docs contains document 5
  // If we had tested against &quot;Mars&quot; docs would be empty because we are matching against a specific array element
});


// You can also deep-compare objects. Don't confuse this with dot-notation!
db.find({ humans: { genders: 2 } }, function (err, docs) {
  // docs is empty, because { genders: 2 } is not equal to { genders: 2, eyes: true }
});

// Find all documents in the collection
db.find({}, function (err, docs) {
});

// The same rules apply when you want to only find one document
db.findOne({ _id: 'id1' }, function (err, doc) {
  // doc is the document Mars
  // If no document is found, doc is null
});
</code></pre>
<h4 id="è¿ç®—ç¬¦lt-lte-gt-gte-in-nin-ne-exists-regex">è¿ç®—ç¬¦ï¼ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>t</mi><mi mathvariant="normal">ã€</mi></mrow><annotation encoding="application/x-tex">ltã€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord cjk_fallback">ã€</span></span></span></span>lteã€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mi>t</mi><mi mathvariant="normal">ã€</mi></mrow><annotation encoding="application/x-tex">gtã€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">t</span><span class="mord cjk_fallback">ã€</span></span></span></span>gteã€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mi>n</mi><mi mathvariant="normal">ã€</mi></mrow><annotation encoding="application/x-tex">inã€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord cjk_fallback">ã€</span></span></span></span>ninã€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>e</mi><mi mathvariant="normal">ã€</mi></mrow><annotation encoding="application/x-tex">neã€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">e</span><span class="mord cjk_fallback">ã€</span></span></span></span>existsã€$regexï¼‰</h4>
<p>è¯­æ³•ä¸º <code>{field: {$op:value}}</code>ï¼Œå…¶ä¸­<code>$op</code>æ˜¯ä»»ä½•æ¯”è¾ƒè¿ç®—ç¬¦ï¼š</p>
<ul>
<li><code>$lt</code> , <code>$lte</code> : å°äºã€å°äºæˆ–ç­‰äº</li>
<li><code>$gt</code>, <code>$gte</code> ï¼šå¤§äºã€å¤§äºæˆ–ç­‰äº</li>
<li><code>$in</code> : çš„æˆå‘˜ã€‚å€¼å¿…é¡»æ˜¯å€¼çš„æ•°ç»„</li>
<li><code>$ne</code>, <code>$nin</code>ï¼šä¸ç›¸ç­‰ï¼Œä¸æ˜¯çš„æˆå‘˜</li>
<li><code>$exists</code>ï¼šæ£€æŸ¥æ–‡æ¡£æ˜¯å¦å…·æœ‰å±æ€§å­—æ®µã€‚å€¼åº”ä¸º <code>true</code> æˆ– <code>false</code></li>
<li><code>$regex</code>ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚ä¸MongoDBç›¸åï¼Œä¸æ”¯æŒå°† <code>$options</code> ä¸ <code>$regex</code> ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¸ä¼šæ¯”regexæ ‡å¿—æ›´å¼ºå¤§ã€‚åŸºæœ¬æŸ¥è¯¢æ›´å¯è¯»ï¼Œå› æ­¤åªæœ‰åœ¨éœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªè¿ç®—ç¬¦æ—¶æ‰ä½¿ç”¨<code>$regex</code>è¿ç®—ç¬¦ï¼ˆè¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹ï¼‰</li>
</ul>
<pre><code class="language-javascript">// $lt, $lte, $gt and $gte work on numbers and strings
db.find({ &quot;humans.genders&quot;: { $gt: 5 } }, function (err, docs) {
  // docs contains Omicron Persei 8, whose humans have more than 5 genders (7).
});

// When used with strings, lexicographical order is used
db.find({ planet: { $gt: 'Mercury' }}, function (err, docs) {
  // docs contains Omicron Persei 8
})

// Using $in. $nin is used in the same way
db.find({ planet: { $in: ['Earth', 'Jupiter'] }}, function (err, docs) {
  // docs contains Earth and Jupiter
});

// Using $exists
db.find({ satellites: { $exists: true } }, function (err, docs) {
  // docs contains only Mars
});

// Using $regex with another operator
db.find({ planet: { $regex: /ar/, $nin: ['Jupiter', 'Earth'] } }, function (err, docs) {
  // docs only contains Mars because Earth was excluded from the match by $nin
});
</code></pre>
<h4 id="æ•°ç»„å­—æ®µ">æ•°ç»„å­—æ®µ</h4>
<p>å½“æ–‡æ¡£ä¸­çš„å­—æ®µæ˜¯æ•°ç»„æ—¶ï¼ŒNeDBé¦–å…ˆå°è¯•æŸ¥çœ‹æ˜¯å¦ä½¿ç”¨äº†ç‰¹å®šäºæ•°ç»„çš„æ¯”è¾ƒå‡½æ•°ï¼ˆç›®å‰åªæœ‰ <code>$size</code> ï¼‰ï¼Œç„¶åé¦–å…ˆå°è¯•ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†æŸ¥è¯¢è§†ä¸ºå¯¹æ¯ä¸ªå…ƒç´ çš„æŸ¥è¯¢ï¼Œå¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ åŒ¹é…ï¼Œåˆ™å­˜åœ¨åŒ¹é…ã€‚</p>
<pre><code class="language-javascript">// Using an array-specific comparison function
// Note: you can't use nested comparison functions, e.g. { $size: { $lt: 5 } } will throw an error
db.find({ satellites: { $size: 2 } }, function (err, docs) {
  // docs contains Mars
});

db.find({ satellites: { $size: 1 } }, function (err, docs) {
  // docs is empty
});

// If a document's field is an array, matching it means matching any element of the array
db.find({ satellites: 'Phobos' }, function (err, docs) {
  // docs contains Mars. Result would have been the same if query had been { satellites: 'Deimos' }
});

// This also works for queries that use comparison operators
db.find({ satellites: { $lt: 'Amos' } }, function (err, docs) {
  // docs is empty since Phobos and Deimos are after Amos in lexicographical order
});

// This also works with the $in and $nin operator
db.find({ satellites: { $in: ['Moon', 'Deimos'] } }, function (err, docs) {
  // docs contains Mars (the Earth document is not complete!)
});
</code></pre>
<h4 id="é€»è¾‘è¿ç®—ç¬¦orandnot">é€»è¾‘è¿ç®—ç¬¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>o</mi><mi>r</mi><mi mathvariant="normal">ï¼Œ</mi></mrow><annotation encoding="application/x-tex">orï¼Œ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord cjk_fallback">ï¼Œ</span></span></span></span>andï¼Œ$not</h4>
<p>å¯ä»¥ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ç»„åˆæŸ¥è¯¢ï¼š</p>
<ul>
<li>å¯¹äº<code>$or</code>å’Œ<code>$and</code>ï¼Œè¯­æ³•ä¸º<code>{$op:[query1ï¼Œquery2ï¼Œâ€¦]}</code>ã€‚</li>
<li>å¯¹äº<code>$not</code>ï¼Œè¯­æ³•ä¸º<code>{$not:query}</code></li>
</ul>
<pre><code class="language-javascript">db.find({ $or: [{ planet: 'Earth' }, { planet: 'Mars' }] }, function (err, docs) {
  // docs contains Earth and Mars
});

db.find({ $not: { planet: 'Earth' } }, function (err, docs) {
  // docs contains Mars, Jupiter, Omicron Persei 8
});

// You can mix normal queries, comparison queries and logical operators
db.find({ $or: [{ planet: 'Earth' }, { planet: 'Mars' }], inhabited: true }, function (err, docs) {
  // docs contains Earth
});
</code></pre>
<h4 id="æ’åºå’Œåˆ†é¡µ">æ’åºå’Œåˆ†é¡µ</h4>
<p>å¦‚æœä¸æŒ‡å®šè¦æŸ¥æ‰¾ã€æŸ¥æ‰¾ä¸€ä¸ªæˆ–è®¡æ•°çš„å›è°ƒï¼Œåˆ™è¿”å›æ¸¸æ ‡å¯¹è±¡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code>sort</code>ã€<code>skip</code>å’Œ<code>limit</code>ä¿®æ”¹å…‰æ ‡ï¼Œç„¶åä½¿ç”¨<code>exec</code>ï¼ˆå›è°ƒï¼‰æ‰§è¡Œå®ƒã€‚</p>
<pre><code class="language-javascript">// Let's say the database contains these 4 documents
// doc1 = { _id: 'id1', planet: 'Mars', system: 'solar', inhabited: false, satellites: ['Phobos', 'Deimos'] }
// doc2 = { _id: 'id2', planet: 'Earth', system: 'solar', inhabited: true, humans: { genders: 2, eyes: true } }
// doc3 = { _id: 'id3', planet: 'Jupiter', system: 'solar', inhabited: false }
// doc4 = { _id: 'id4', planet: 'Omicron Persei 8', system: 'futurama', inhabited: true, humans: { genders: 7 } }

// No query used means all results are returned (before the Cursor modifiers)
db.find({}).sort({ planet: 1 }).skip(1).limit(2).exec(function (err, docs) {
  // docs is [doc3, doc1]
});

// You can sort in reverse order like this
db.find({ system: 'solar' }).sort({ planet: -1 }).exec(function (err, docs) {
  // docs is [doc1, doc3, doc2]
});

// You can sort on one field, then another, and so on like this:
db.find({}).sort({ firstField: 1, secondField: -1 }) ...   // You understand how this works!
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[DNF å¤§å¤©å¾¡å·´å¡å¦®æ­é…]]></title>
        <id>https://listyu.github.io/post/dnftianyu/</id>
        <link href="https://listyu.github.io/post/dnftianyu/">
        </link>
        <updated>2023-01-02T09:34:46.000Z</updated>
        <content type="html"><![CDATA[<p>å·¦ä¾§äº”ä»¶ å¤§å¤©å¾¡äº”ä»¶ å¦‚æœå…¨èº«çº¢10 è£¤å­å¯ä»¥æ¢æœºæ¢°è£¤å­<br>
æ‰‹é•¯å¼‚å¸¸æ‰‹é•¯ æ„Ÿç”µæˆ–å‡ºè¡€, ç›®çš„æ˜¯ä¸ºäº†æ‰€å—ä¼¤å®³çš„50%è½¬ä¸ºå¼‚å¸¸ä¼¤å®³<br>
é¡¹é“¾å†›å›¢é¡¹é“¾/æœºæ¢°é¡¹é“¾/è¿å‡»é¡¹é“¾<br>
æˆ’æŒ‡ éšæ²¡çš„é‚ªå¿µæˆ’æŒ‡ ä¿å‘½<br>
ç‰¹æ®Šä¸‰ä»¶å¥—<br>
ç«ï¼šå¿ƒä¹‹æ½œå½±ï¼Œä¸è´¥å¥–ç‰Œï¼Œæˆ˜äº‰ä¹‹ä¸»<br>
å…‰ï¼šç”Ÿå‘½æœ¬æºï¼Œç”Ÿæœºç›ç„¶çš„ç»¿å®çŸ³ï¼Œæ— å°½çš„ç”Ÿæœº<br>
å†°ï¼šæœªçŸ¥æ–‡æ˜äººé¢çŸ³ï¼ŒæœªçŸ¥æ–‡æ˜æ˜ŸçŸ³ï¼ŒæœªçŸ¥æ–‡æ˜åŒå­çŸ³<br>
æš—ï¼šé£˜æ¸ºçš„çŸ¥è¯†ï¼Œè‡ªç„¶çµæ¯éœ²ç ï¼Œæ™¨æ›¦çš„æ–°èŠ½<br>
å·¦æ§½éƒ¨ä½å¦‚æœèƒ½æ´»ä¸‹æ¥å¯æ¢å“çº§å·¦æ§½ã€æŒ–æ˜ä¹‹ç‹éƒ¨ä»¶<br>
å³æ§½éƒ¨ä½å¦‚æœèƒ½æ´»ä¸‹æ¥å¯ä»¥æ¢æœªçŸ¥çš„é»„é‡‘çŸ³ç¢‘</p>
<p>é¦–é¥°è´´è†œ ä¸‰é‡‘<br>
é˜²å…·è´´è†œ äº”å†°èŠ±</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://listyu.github.io/post/hello-gridea/</id>
        <link href="https://listyu.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="https://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>